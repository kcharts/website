KISSY.add(function(d,h,f){var e=d.all,k=d.Event,b="ks-pagination-prev",l="ks-pagination-next",a="ks-pagination-page",i="ks-pagination-nextdisable",c="ks-pagination-predisable",g="ks-pagination-global";function j(m){var n=this;n.config=d.mix({totalPage:0,curPage:0,autoRender:true,pageSize:10,tpl:{page:"<a class='ks-pagination' href='javascript:void(0)'>{{page}}</a>",curPage:"<strong class='current'>{{curPage}}</strong>",prevPage:"<a class='pre' href='#{{prevPage}}'>prev</a>",nextPage:"<a class='next' href='#{{nextPage}}'>next</a>",prevDisable:"<a class='pre-disable' href='#{{prevPage}}'>prev</a>",nextDisable:"<a class='next-disable' href='#{{nextPage}}'>next</a>",more:"<span class='more'>...</span>"}},m,undefined,undefined,true);n._html="";n.setPageInfo({totalPage:n.config.totalPage,curPage:n.config.curPage,pageSize:n.config.pageSize});n.config.autoRender&&n.render()}d.extend(j,f,{setPageInfo:function(n){var m=this,n=n||{};m._totalPage=n.totalPage||m._totalPage;m._curPage=n.curPage||m._curPage;m._pageSize=n.pageSize||m._pageSize},setPage:function(m){this.setPageInfo({curPage:Math.round(m)})},getDom:function(){var x=this,r=x.config.tpl,q=x._totalPage,s=x._curPage,t=x._pageSize,w=t%2,m=w?Math.ceil(t/2):Math.floor(t/2),u=s-m+1<=1?1:s-m+1,v=u+t-1>=q?q:u+t-1,p="";if(v-u+1<t&&q>=t){var n=t-(v-u+1);if(u-n>=1){u=u-n}else{v=v+n}}s==1?p+="<span class='option'><span class='"+c+" "+g+"'>"+h(r.prevDisable).render({prevPage:x._curPage||0})+"</span>":u>1?p+="<span class='option'><span class='"+b+" "+g+"'>"+h(r.prevPage).render({prevPage:x._curPage-1||0})+"</span>"+r.more:p+="<span class='option'><span class='"+b+" "+g+"'>"+h(r.prevPage).render({prevPage:x._curPage-1||0})+"</span>";for(var o=u;o<=v;o++){p+=(o==s?h(r.curPage).render({curPage:o}):"<span class='"+g+" "+a+"' page="+o+">"+h(r.page).render({page:o})+"</span>")}s==q?p+="<span class='"+g+" "+i+"'>"+h(r.nextDisable).render({nextPage:q||0})+"</span>":v<q?p+=r.more+"<span class='"+g+" "+l+"'>"+h(r.nextPage).render({nextPage:Math.round(x._curPage)+1>=q?q:Math.round(x._curPage)+1})+"</span></span>":p+="<span class='"+g+" "+l+"'>"+h(r.nextPage).render({nextPage:Math.round(x._curPage)+1>=q?q:Math.round(x._curPage)+1})+"</span></span>";x._html=p+"</span>";return p},render:function(){var m=this;if(!m.config.container){return}m.getDom();e(m.config.container).html(m._html);m._bindEvt(m.config);m.fire("afterRender");m.config.callback&&m.config.callback(m)},getCurPage:function(){return this._curPage},getTotalPage:function(){return this._totalPage},_bindEvt:function(p){var n=this,o;if(!p.container){return}var m=p.container;k.detach(e("."+g,e(m)),"click");k.on(e("."+g,e(m)),"click",function(t){t.preventDefault();var q=e(t.currentTarget);if(q.hasClass(g)){if(q.hasClass(a)){o=Math.round(q.attr("page"))}else{if(q.hasClass(b)){o=n.getCurPage()-1}else{if(q.hasClass(l)){var r=n.getTotalPage(),s=n.getCurPage();o=s<r?Math.round(s)+1:s}}}n.config.onclick&&n.config.onclick(o)}})}});return j},{requires:["template","./index.css","base"]});
