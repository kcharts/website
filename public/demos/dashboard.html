<!-- -*- coding: utf-8; -*- -->
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <link rel="stylesheet" href="http://a.tbcdn.cn/p/global/1.0/global-min.css" />
    <title>chart test</title>
  </head>
  <style type="text/css">
   .container{
     width:716px;
     height:371px;
     margin: 0px auto;
   }
   .demo{
     width:225px;
     height:225px;
     float: left;
     margin:60px 5px;
   }
   .btn-change{
     background: #eee;
     color:#444;
     border:1px solid #666;
     padding: 3px 5px;
   }
   .btn-change:hover{text-decoration: none;color:#80adca;border:1px solid #80adca;}
  </style>
  <body>
    <div class="container">
      <div id="demo1" class="demo">
      </div>
      <div id="demo2" class="demo">
      </div>
      <div id="demo3" class="demo">
      </div>
      <a href='javascript:void(0)' class="btn-change" id="change">随机指向</a>
      <script charset="utf-8" src="http://a.tbcdn.cn/s/kissy/1.3.0/kissy-min.js"></script>
      <script type="text/javascript">
       //KISSY.Config.combine = true;

       function helperRand(a,b){
         return Math.floor(Math.random()*(b-a+1)+a);
       }

       KISSY.use('gallery/kcharts/1.1/dashboard/index',function(S,DashBoard){
         var dashboard = new DashBoard({
           renderTo:'#demo1'
           , width : 225
           , height : 225

           , ticks : {
             r1:85,       //粗刻度的起始半径
             r2:90,       //细刻度的起始半径
             R:95,        //末半径
             start:0,     //初始弧度
             end:Math.PI, //末弧度
             n:30,        //分成的份数
             m:5,         //粗线的规则 TODO:可以是函数
             thickStyle:{ // 粗刻度样式
                         "stroke":'red'
                         },
             thinStyle:{  // 细刻度样式
                        "stroke":'#666'
                        }
           }
           , pointer:{
             theme:{
               name:'a',
               fill:'red',
               stroke:'#999',
               r:8,       // 圆头半径
               R:80       // 指针半径
             }
           }
         })
         var effect = {
           easing:'elastic'
           , ms:1000
           , callback:S.noop
         }

         dashboard.pointTo(45,effect);

         var dashboard2 = new DashBoard({
           renderTo:'#demo2',
           width:225,
           height:225,
           background:{
             src:'http://kcharts.taobao.net/demos/1.1/demo/dashboard/assets/bg2.png',
             width:225,
             height:186,
             cx:114,
             cy:110
           },
           pointer:{
             src:'http://kcharts.taobao.net/demos/1.1/demo/dashboard/assets/pointer2.png', //TODO:可以传入data-uri
             width:20,
             height:111,
             cx:10,
             cy:102
           }
         })

         var effect = {
           easing:'elastic',
           ms:1000,
           callback:S.noop
         }

         dashboard2.pointTo(-90,effect)

         var dashboard3 = new DashBoard({
           renderTo:'#demo3',
           width:230,
           height:230,
           background:{
             src:'http://kcharts.taobao.net/demos/1.1/demo/dashboard/assets/bg1.png',
             width:230,
             height:230,
             cx:116,
             cy:120
           },
           pointer:{
             src:'http://kcharts.taobao.net/demos/1.1/demo/dashboard/assets/pointer1.png', //TODO:可以传入data-uri
             width:24,
             height:114,
             cx:12,
             cy:104
           }
         })

         var effect = {
           easing:'elastic',
           ms:1000,
           callback:S.noop
         }

         dashboard3.pointTo(20,effect)

         S.one('#change').on('click',function(){
           dashboard.pointTo(helperRand(0,180),effect)
           dashboard2.pointTo(helperRand(-90,120),effect)
           dashboard3.pointTo(helperRand(-90,120),effect)
         })
       });
      </script>
  </body>
</html>


